<html>
  <head>
    <style>
      body {
        margin: 0px;
      }
      .inline {
        display: inline-block;
        margin: 0px 10px 0px 10px;
      }
      .menu {
        border-bottom-style: solid;
        border-bottom-width: 3px;
        text-align: center;
      }
      .brand {
        color: maroon;
      }
      .add-button {
        background-color: maroon;
        color: white;
        border-radius: 3px;
      }
      .content {
        padding-left: 15%;
        padding-right: 15%;
        padding-top: 20px;
      }
      .question-title {
        font-size: 25px;
      }

      .answer-count {
        border-style: solid;
        border-width: 1px 0px 1px 0px;
        padding: 10px 0px 10px 0px;
        margin: 10px 0px 10px 0px;
      }

      .answer {
        border-style: solid;
        border-width: 0px 0px 1px 0px;
      }
      .answer-form {
        padding-top:25px;
      }
    </style>
    <title>Quora Question</title>
  </head>
  <body>
    <div class="menu">
      <h1 class="inline brand">Quora</h1>
      <a href="#" class="inline">Home</a> <a href="#" class="inline">Answer</a>
      <a href="#" class="inline">Notifications</a>
      <input class="inline" type="text" value="Quora" />
      <input class="inline add-button" type="button" value="Add Question" />
    </div>

    <div class="content">
      <div class="question-title" id="question">
        Loading...
      </div>
      <div class="question-actions">
        <a href="#" class="inline">Answer</a>
        <a href="#" class="inline">Follow</a>
        <a href="#" class="inline">Request</a>
      </div>
      <div class="answer-count" id="answer-count">
        3 Answers
      </div>
      <div class="answers" id="answers">

      </div>

      <div class="answer-form">
        <form method="POST" action="http://localhost/3000/question" id="answerForm">
          <label for="Name">name:</label>
          <input type="text" id="Name" name="Name"/>
          <label for="Answer">answer:</label>
          <input type="text" id="Answer" name="Answer" />
          <input type="submit" value="Submit"/>
        </form>
      </div>
    </div>

    <script>
      fetch("http://localhost:3000/question")
        .then(function(res) {
          if (res.status !== 200) {
            console.log(
              "there seem to be a problem. status code: " + res.status
            );
            return;
          }

          res.json().then(function(data) {
            document.getElementById("question").innerHTML = data.Question;


            if(data.Answers){
              document.getElementById("answer-count").innerHTML = data.Answers.length + " Answers";
              
              data.Answers.forEach(function(answer) {
                var name = document.createElement("h4");
                name.appendChild(document.createTextNode(answer.Name));
              

                var details = document.createElement("p");
                details.appendChild(document.createTextNode(answer.Answer));
                details.class="details-text";

                var answerdiv = document.createElement("div");
                answerdiv.className="answer";
                answerdiv.appendChild(name);
                answerdiv.appendChild(details);

                var answers = document.getElementById("answers");
                answers.appendChild(answerdiv);

              })
            }


            document.getElementById("answerForm").action ="http://localhost:3000/question/" + data._id.toString();

            console.log(data);
          });
        })
        .catch(function(err) {
          console.log("Fetch Error :-S", err);
        });
    </script>
  </body>
</html>
